# MODEコマンド テストガイド

このディレクトリには、MODEコマンドの各オプションをテストするためのファイルが含まれています。

## ファイル一覧

### 1. `mode_test_cases.md`
- 手動テスト用の詳細なテストケース集
- 各オプションの期待される動作と結果を記載
- 手動テスト時の参考資料として使用

### 2. `mode_test.sh`
- 自動化されたテストスクリプト（Bash）
- 基本的なMODEコマンドのテストを自動実行
- ログファイル `mode_test_results.log` に結果を出力

### 3. `mode_interactive_test.py`
- インタラクティブなテストツール（Python3）
- メニュー形式でMODEコマンドの各オプションをテスト
- リアルタイムでサーバーのレスポンスを確認可能

### 4. `testClient.cpp`
- 既存のテストクライアント
- 他のテストスクリプトから使用される

## 使用方法

### 前提条件
1. IRCサーバーが起動していること
2. テスト用のポートが利用可能であること

### 1. 手動テスト
```bash
# テストケースを参照しながら手動でテスト
cat mode_test_cases.md
```

### 2. 自動テスト（Bash）
```bash
# 実行権限を付与
chmod +x mode_test.sh

# テスト実行（ポート6667の場合）
./mode_test.sh 6667

# 結果確認
cat mode_test_results.log
```

### 3. インタラクティブテスト（Python）
```bash
# Python3が必要
python3 mode_interactive_test.py 6667
```

## テスト対象のMODEオプション

### チャンネルモード
- **+i/-i**: 招待制の設定/解除
- **+t/-t**: トピック制限の設定/解除
- **+l/-l**: ユーザー数制限の設定/解除
- **+k/-k**: チャンネルキー（パスワード）の設定/削除
- **+o/-o**: オペレーター権限の付与/剥奪

### エラーケース
- パラメータ不足
- 存在しないチャンネル
- チャンネルメンバーでない
- オペレーター権限なし
- 複数モード指定
- 無効なモード文字
- パラメータが必要なモードでのパラメータ不足
- 無効なパラメータ値

## テスト結果の確認ポイント

### 成功ケース
1. 適切なレスポンスコードが返される
2. チャンネルメンバー全員に変更通知が送信される
3. チャンネルの状態が正しく変更される

### エラーケース
1. 適切なエラーコードが返される
2. エラーメッセージが正しい
3. チャンネルの状態が変更されない

## 注意事項

- テスト実行前にサーバーが正常に起動していることを確認してください
- 複数のクライアントでテストする場合は、それぞれ異なるニックネームを使用してください
- テスト後はチャンネルの状態をリセットすることをお勧めします

## トラブルシューティング

### よくある問題
1. **接続エラー**: サーバーが起動していない、またはポート番号が間違っている
2. **権限エラー**: テストユーザーがチャンネルオペレーターでない
3. **タイムアウト**: サーバーの応答が遅い場合は、スクリプトの待機時間を調整

### デバッグ方法
1. サーバーのログを確認
2. `DEBUG #test` コマンドでチャンネル状態を確認
3. 手動でコマンドを実行して動作を確認
